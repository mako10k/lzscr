# 構文（現状）

- リテラル:
  - Unit: `()`
  - Int: `42`
  - Str: `"hi"`（\エスケープ可）
- 識別子:
  - 参照: `~name`
  - 裸シンボル: `Name`（値として保持、将来のコンストラクタ変数候補）
  - メンバ風シンボル: `.println` → シンボルとしてパース
- ラムダ: `\x -> expr`
- 適用: `(f x)`（左結合）
- ブロック: `{ expr }`
- 糖衣構文:
  - `!sym` → `(~effects .sym)`
- 予約/トークン: `~`, `!`, `.ident`, `(`, `)`, `{`, `}`, `,`, `->`, `\\`

例:
## 構文ガイド（2025-09-05）

### リテラル/基本

- Unit: `()`
- Int: `42`
- Float: `1.0`, `.5`, `3.`
- Str: `"hi"`（\\エスケープ可）
- 参照: `~name`（例: `~add`, `~true`）
- シンボル値: `.name`（例: `.println`, `.Foo`）
- ラムダ: `\x -> expr`
- ブロック: `{ expr }`
- 適用: `(f x)`（左結合）

### 糖衣構文

- 効果: `!println` → `(~effects .println)`
- 真偽値: `true()` → `~true`, `false()` → `~false`
- コンストラクタ値: `.Foo 1 2` → `Ctor("Foo", [1,2])`

### 中置演算子（左結合・Pratt 優先順位）

優先順位（高→低）:
- 20: `*`, `/`, `.*`, `./`
- 10: `+`, `-`, `.+`, `.-`
- 5: `<`, `<=`, `>`, `>=`, `.<`, `.<=`, `.>`, `.>=`
- 4: `==`, `!=`

糖衣展開（関数適用へ）:

- Int 系
  - `a + b` → `(~add a) b`
  - `a - b` → `(~sub a) b`
  - `a * b` → `(~mul a) b`
  - `a / b` → `(~div a) b`（0 でエラー）
- Float 系（別記号、混在はエラー）
  - `a .+ b` → `(~fadd a) b`
  - `a .- b` → `(~fsub a) b`
  - `a .* b` → `(~fmul a) b`
  - `a ./ b` → `(~fdiv a) b`（0.0 でエラー）
- 比較/等価
  - `a < b`  → `(~lt a) b`、`a <= b` → `(~le a) b`、`a > b` → `(~gt a) b`、`a >= b` → `(~ge a) b`
  - `a .< b` → `(~flt a) b`、`a .<= b` → `(~fle a) b`、`a .> b` → `(~fgt a) b`、`a .>= b` → `(~fge a) b`
  - `a == b` → `(~eq a) b`、`a != b` → `(~ne a) b`

戻り値は現状 `Symbol("True"|"False")`。

### 例

```
1 + 2 * 3            # => 7
1.5 .+ 2.0 .* 2.0    # => 5.5
8 / 2                # => 4
8.0 ./ 2.0           # => 4.0
(.Foo 1) == (.Foo 1) # => True
!println "ok"
(~seq () (!println "ok"))
(\x -> x) 10
```
